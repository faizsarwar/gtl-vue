{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b40f742\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"page-sign-up m-5 row\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-4\"\n}, null, -1));\n\nconst _hoisted_3 = {\n  class: \"col-4 is-offset-4\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"heading\"\n}, [/*#__PURE__*/_createElementVNode(\"b\", null, \" Log in \")], -1));\n\nconst _hoisted_5 = {\n  class: \"form-group mt-4 mb-5\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"form-label\"\n}, [/*#__PURE__*/_createElementVNode(\"b\", null, \" Email \")], -1));\n\nconst _hoisted_7 = {\n  class: \"\"\n};\nconst _hoisted_8 = {\n  class: \"form-group mt-4 mb-5\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"form-label\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \" Password\")], -1));\n\nconst _hoisted_10 = {\n  class: \"control\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"notification is-danger\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Username or password is not valid \", -1));\n\nconst _hoisted_13 = [_hoisted_12];\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-success\"\n}, \"Log in\", -1));\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1));\n\nconst _hoisted_16 = /*#__PURE__*/_createTextVNode(\" Or \");\n\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"click here\");\n\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode();\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"b\", null, \" to Sign Up! \", -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control\",\n    id: \"formGroupExampleInput\",\n    placeholder: \"Enter Email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event)\n  }, null, 512), [[_vModelText, $data.email]])])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"formGroupExampleInput2\",\n    placeholder: \"Enter Password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 512), [[_vModelText, $data.password]])])]), $data.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _hoisted_13)) : _createCommentVNode(\"\", true), _hoisted_14, _hoisted_15, _hoisted_16, _createVNode(_component_router_link, {\n    to: \"/sign-up\"\n  }, {\n    default: _withCtx(() => [_hoisted_17]),\n    _: 1\n  }), _hoisted_18, _hoisted_19], 32)])]);\n}","map":{"version":3,"mappings":";;;;;EAEOA,KAAK,EAAC;;;gEAELC,oBAEM,KAFN,EAEM;EAFDD,KAAK,EAAC;AAEL,CAFN,EAAmB,IAAnB,EAAmB,EAAnB;;;EAGGA,KAAK,EAAC;;;gEACTC,oBAA0C,IAA1C,EAA0C;EAAtCD,KAAK,EAAC;AAAgC,CAA1C,EAAmB,cAAEC,oBAAgB,GAAhB,EAAgB,IAAhB,EAAG,UAAH,CAAF,CAAnB;;;EAGOD,KAAK,EAAC;;;gEAETC,oBAAyC,GAAzC,EAAyC;EAAtCD,KAAK,EAAC;AAAgC,CAAzC,EAAqB,cAAEC,oBAAc,GAAd,EAAc,IAAd,EAAG,SAAH,CAAF,CAArB;;;EACKD,KAAK,EAAC;;;EAWNA,KAAK,EAAC;;;gEAEPC,oBAAqD,GAArD,EAAqD;EAAlDD,KAAK,EAAC;AAA4C,CAArD,EAAqB,cAAEC,oBAA0B,QAA1B,EAA0B,IAA1B,EAAQ,WAAR,CAAF,CAArB;;;EACKD,KAAK,EAAC;;;;EAYZA,KAAK,EAAC;;;iEAETC,oBAAyC,GAAzC,EAAyC,IAAzC,EAAG,oCAAH,EAAqC,EAArC;;qBAAAC;;iEAGAD,oBAA6D,QAA7D,EAA6D;EAArDE,IAAI,EAAC,QAAgD;EAAvCH,KAAK,EAAC;AAAiC,CAA7D,EAA8C,QAA9C,EAAoD,EAApD;;iEAEFC,oBAAM,IAAN,EAAM,IAAN,EAAM,IAAN,EAAM,EAAN;;kDAAM;;kDAEwB;;;;iEAAyBA,oBAAoB,GAApB,EAAoB,IAApB,EAAG,eAAH,EAAgB,EAAhB;;;;;uBA/C/DG,oBAmDM,KAnDN,cAmDM,CAjDAC,UAiDA,EA9CFJ,oBA6CM,KA7CN,cA6CM,CA5CJK,UA4CI,EA1CJL,oBAyCO,MAzCP,EAyCO;IAzCAM,QAAM,wDAAUC,mDAAV,EAAoB,WAApB;EAyCN,CAzCP,GACEP,oBAYM,KAZN,cAYM,CAVJQ,UAUI,EATJR,oBAQM,KARN,cAQM,iBAPJA,oBAME,OANF,EAME;IALAE,IAAI,EAAC,OAKL;IAJAH,KAAK,EAAC,cAIN;IAHAU,EAAE,EAAC,uBAGH;IAFAC,WAAW,EAAC,aAEZ;+DADSC,cAAKC;EACd,CANF,6BAKWD,cAEP,CARN,CASI,CAZN,GAcEX,oBAYI,KAZJ,cAYI,CAVAa,UAUA,EATAb,oBAQM,KARN,eAQM,iBAPNA,oBAME,OANF,EAME;IALEE,IAAI,EAAC,MAKP;IAJEH,KAAK,EAAC,cAIR;IAHEU,EAAE,EAAC,wBAGL;IAFEC,WAAW,EAAC,gBAEd;+DADWC,iBAAQC;EACnB,CANF,6BAKaD,iBAEP,CARN,CASA,CAZJ,GAewCA,aAAOG,wBAAjDX,oBAGM,KAHN,eAGMY,WAHN,oCAKEC,aAEFC,0BAEGC,aAAmDC,sBAAnD,EAAmD;IAAtCC,EAAE,EAAC;EAAmC,CAAnD,EAA0B;sBAAC,MAAU,cAAX;;EAAA,CAA1B,gBAAoDC,YAvCzD,KA0CI,CA7CN,CA8CE,CAnDN","names":["class","_createElementVNode","_hoisted_12","type","_createElementBlock","_hoisted_2","_hoisted_4","onSubmit","$options","_hoisted_6","id","placeholder","$data","$event","_hoisted_9","length","_hoisted_13","_hoisted_14","_hoisted_15","_createVNode","_component_router_link","to","_hoisted_19"],"sourceRoot":"","sources":["/home/fiaz/Documents/GitHub/gtl-vue/src/views/login.vue"],"sourcesContent":["  \n<template>\n  <div class=\"page-sign-up m-5 row\">\n\n        <div class=\"col-4 \">\n\n        </div>\n      <div class=\"col-4 is-offset-4\">\n        <h1 class=\"heading\"> <b>  Log in </b></h1>\n\n        <form @submit.prevent=\"submitForm\" >\n          <div class=\"form-group mt-4 mb-5\">\n            <!-- <label for=\"formGroupExampleInput\" class=\"form-label\">Username</label> -->\n            <p class=\"form-label\"> <b> Email </b></p> \n            <div class=\"\">\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                id=\"formGroupExampleInput\"\n                placeholder=\"Enter Email\"\n                v-model=\"email\"\n              />\n            </div>\n          </div>\n\n            <div class=\"form-group mt-4 mb-5\" >\n                <!-- <label for=\"formGroupExampleInput2\">Password</label> -->\n                <p class=\"form-label\"> <strong> Password</strong></p> \n                <div class=\"control\">\n                <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"formGroupExampleInput2\"\n                    placeholder=\"Enter Password\"\n                    v-model=\"password\"\n                />\n                </div>\n          </div>\n\n          <!-- warning -->\n          <div class=\"notification is-danger\" v-if=\"errors.length\">\n            <!-- <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p> -->\n            <p>Username or password is not valid </p>\n          </div>\n\n            <button type=\"submit\" class=\"btn btn-success\">Log in</button>\n\n          <hr />\n\n          Or <router-link to=\"/sign-up\">click here</router-link> <b> to Sign Up! </b> \n          \n        </form>\n      </div>\n  </div>\n</template>\n\n\n<script>\nimport axios from 'axios'\nexport default {\n    name: 'LogIn',\n    data() {\n        return {\n            email: '',\n            password: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Log In | GTL'\n    },\n    methods: {\n        async submitForm() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n            localStorage.removeItem(\"token\")\n            const formData = {\n                email: this.email,\n                password: this.password\n            }\n            await axios\n                .post(\"/api/v1/CustomUser/login\", formData)\n                .then(response => {\n                    const token = response.data.auth_token\n                    const userid=response.data.id\n                    console.log(userid,\"token\")\n                    this.$store.commit('setToken', token)\n                    this.$store.commit('setUserId', userid)\n                    \n                    axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n                    localStorage.setItem(\"token\", token)\n                    localStorage.setItem(\"userid\", userid)\n                    const toPath = this.$route.query.to || '/cart'\n                    this.$router.push(toPath)\n                })\n                .catch(error => {\n                    if (error.response) {\n                        for (const property in error.response.data) {\n                            this.errors.push(`${property}: ${error.response.data[property]}`)\n                        }\n                    } else {\n                        this.errors.push('Something went wrong. Please try again')\n                        \n                        console.log(JSON.stringify(error))\n                    }\n                })\n        }\n    }\n}\n</script>\n<style scoped>\na{\n    color: blue;\n    font-weight: bolder;\n}\n.form-label {\n  /* display: inline-block;\n  width: 140px; */\n  margin-bottom: 2px;\n  text-align: left;\n  color: blue;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}